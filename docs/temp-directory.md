<!--
GENERATED FILE - DO NOT EDIT
This file was generated by [MarkdownSnippets](https://github.com/SimonCropp/MarkdownSnippets).
Source File: /docs/mdsource/temp-directory.source.md
To change this file edit the source file and then run MarkdownSnippets.
-->

## TempDirectory

A temporary directory helper for tests that automatically cleans up directories.


### Features

- Creates unique temporary directories in `%TEMP%\VerifyTempDirectory\{Path.GetRandomFileName()}`
- Automatic cleanup on dispose
- Implicit conversion to `string` and `DirectoryInfo`
- Thread-safe directory creation
- Removes orphaned directories older than 24 hours


#### Orphaned directories

Orphaned directories can occur in the following scenario

 * A breakpoint is set in a test that uses TempDirectory
 * Debugger is launched and breakpoint is hit
 * Debugger is force stopped, resulting in the `TempDirectory.Dispose()` not being executed


### Usage

<!-- snippet: TempDirectory -->
<a id='snippet-TempDirectory'></a>
```cs
[Fact]
public void Usage()
{
    using var temp = new TempDirectory();

    // wite a file to the temp directory
    File.WriteAllText(Path.Combine(temp, "test.txt"), "content");

    // implicit conversion to DirectoryInfo
    DirectoryInfo info = temp;
    var filesViaInfo = info.EnumerateFiles();
    Trace.WriteLine(filesViaInfo.Count());

    // implicit conversion to string
    string path = temp;
    var filesViaPath = Directory.EnumerateFiles(path);
    Trace.WriteLine(filesViaPath.Count());

    // Info property returns a DirectoryInfo for the directory
    var fileViaInfoProp = temp.Info.EnumerateFiles();
    Trace.WriteLine(fileViaInfoProp.Count());

    // Accessing the root directory for all TempDirectory instances
    Trace.WriteLine(TempDirectory.RootDirectory);

    // Directory automatically deleted here
}
```
<sup><a href='/src/Verify.Tests/TempDirectoryTests.cs#L31-L62' title='Snippet source file'>snippet source</a> | <a href='#snippet-TempDirectory' title='Start of snippet'>anchor</a></sup>
<!-- endSnippet -->


### Cleanup Behavior

The dispose cleans up the current instance.

The static constructor automatically:

1. Ensures the root directory `%TEMP%\VerifyTempDirectory` exists
1. Deletes sub-directories not modified in the last 24 hours
1. Runs once per application domain


### Thread Safety

Each instance creates a unique directory using `Path.GetRandomFileName()`, making concurrent usage safe.
